/*! kist-fauxAnchor 0.4.7 - Simulate default anchor action. | Author: Ivan NikoliÄ‡, 2014 | License: MIT */
!function(a,b,c){function d(a,b,c){var d=l.browser.webkit.all,e=l.browser.safari.all,f=l.browser.ie.lte8,g=l.feature.touch,h=this.options.type,i=l.input.metaKey(c),j=0;return"click"===a&&(!d&&!g||f&&g)&&j++,"mousedown"===a&&((d||g&&2!==b)&&j++,f&&g&&j--),"keydown"===a&&(j++,d||13!==b||j--,"anchor"===h&&(!d&&g&&13===b&&j++,f&&g&&13===b&&j--),"button"===h&&((!d&&g&&13===b||e&&i)&&j++,(d&&13===b&&i||f&&g&&13===b)&&j--),"unfocusable"===h&&d&&13===b&&j--),(this.prevented||m.contextMenu.call(this,h,c))&&j++,Boolean(Math.max(0,j))}function e(a){var b=a.which,c=a.type,e=this.options.type;"anchor"===e&&"click"===c&&a.preventDefault(),d.call(this,c,b,a)||(this.simulateAlternative=m.simulateAlternative.call(this,e,a),this.action(m.href.call(this,e),m.target.call(this,e,a),a))}function f(b){var c={};return"object"==typeof b&&(b.primary&&(c.basic=b.primary),b.secondary&&(c.alternative=b.secondary),c=a.extend({},b,c)),c}function g(b,c){this.element=b,this.options=a.extend({},this.defaults,{type:m.type(this.element)},c),k.setup.call(this),i.setup.call(this),j.setup.call(this)}var h={name:"fauxAnchor",ns:{css:"kist-FauxAnchor",event:".kist.fauxAnchor"},error:function(a){throw new Error(h.name+": "+a)}};h.classes={item:h.ns.css+"-item"},h.publicMethods=["destroy","prevent","unprevent"];var i={setup:function(){this.dom=this.dom||{},this.dom.el=a(this.element),this.dom.el.addClass(h.classes.item),"unfocusable"===this.options.type&&this.options.focus&&this.dom.el.attr({tabindex:0,role:"link"})},destroy:function(){this.dom.el.removeClass(h.classes.item),"unfocusable"===this.options.type&&this.options.focus&&this.dom.el.removeAttr("tabindex role")}},j={setup:function(){this.dom.el.on("click"+this.instance.ens,a.proxy(e,this)),this.dom.el.on("mousedown"+this.instance.ens,a.proxy(e,this)),this.dom.el.on("keydown"+this.instance.ens,a.proxy(e,this))},destroy:function(){this.dom.el.off(this.instance.ens)}},k={id:0,setup:function(){this.instance=this.instance||{},this.instance.id=k.id++,this.instance.ens=h.ns.event+"."+this.instance.id},destroy:function(){delete a.data(this.element)[h.name]}},l={platform:{osx:/OS X/i.test(navigator.userAgent)},browser:{webkit:{all:"WebkitAppearance"in c.documentElement.style},safari:{all:/constructor/i.test(b.HTMLElement)},ff:{all:"MozAppearance"in c.documentElement.style},ie:{lte8:c.all&&!c.addEventListener}},feature:{touch:"Modernizr"in b&&Modernizr.touchevents||"ontouchstart"in b||"DocumentTouch"in b&&c instanceof DocumentTouch},input:{metaKey:function(a){return a.ctrlKey&&!l.platform.osx||a.metaKey}}},m={type:function(b){return b=a(b),b.is("a")?"anchor":b.is("button")||b.is('input[type="button"]')?"button":"unfocusable"},target:function(a,b){return 2===b.which||(1===b.which||13===b.which&&"anchor"!==a||13===b.which&&"anchor"===a&&!l.browser.webkit.all)&&l.input.metaKey(b)?"_blank":this.dom.el["anchor"===a?"attr":"data"]("target")||""},href:function(a){return this.dom.el["anchor"===a?"attr":"data"]("href")||""},contextMenu:function(a,b){return 3===b.which||(1===b.which||13===b.which)&&b.ctrlKey&&l.platform.osx?!0:!1},simulateAlternative:function(a,b){return"anchor"===a&&(2===b.which&&!l.browser.webkit.all&&!l.browser.ie.lte8||this.dom.el.is(b.target)&&l.browser.ie.lte8&&(2===b.which||1===b.which&&b.ctrlKey))?!1:!0}};a.extend(g.prototype,{action:function(b,c,d){var e="_blank"===c?"alternative":"basic";if(("anchor"===this.options.type||!a(d.target).closest("a").length)&&this.options.condition.call(this.element,d)&&b)return this.options[e].call(this.element,d,a.proxy(this[e],this,b))},basic:function(a){b.location.assign(a)},alternative:function(a){this.simulateAlternative&&b.open(a,"_blank")},destroy:function(){i.destroy.call(this),j.destroy.call(this),k.destroy.call(this)},prevent:function(){this.prevented=!0},unprevent:function(){this.prevented=!1},prevented:!1,defaults:{focus:!0,basic:function(a,b){b()},alternative:function(a,b){b()},condition:function(){return!0}}}),a.kist=a.kist||{},a.fn[h.name]=function(b){return"string"==typeof b&&-1!==a.inArray(b,h.publicMethods)?this.each(function(){var c=a.data(this,h.name);c&&c[b]()}):(b=f(b),this.each(function(){a.data(this,h.name)||a.data(this,h.name,new g(this,b))}))}}(jQuery,window,document);